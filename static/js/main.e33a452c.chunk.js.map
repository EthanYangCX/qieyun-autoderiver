{"version":3,"sources":["large-tooltip.ts","Entry.tsx","SchemaEditor.tsx","Main.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["LargeTooltip","init","divOuter","document","createElement","classList","add","divInner","appendChild","body","addTooltip","content","relativeToNode","showTooltip","relativeToNodeBox","getBoundingClientRect","relativeToNodeTop","top","window","pageYOffset","relativeToNodeLeft","left","pageXOffset","ReactDOM","render","divInnerBox","divInnerHeight","height","divInnerWidth","width","targetTop","targetLeft","oneEmSize","parseFloat","getComputedStyle","fontSize","maximumRight","Math","max","scrollWidth","documentElement","offsetWidth","clientWidth","style","remove","hideTooltip","addEventListener","Entry","props","entries","preselect","selected","length","state","rubyClass","some","解釋","index","this","setState","ch","tooltip","className","map","i","pronunciation","ress","onClick","handleClick","lang","join","res","字頭","音韻地位","反切","Fragment","描述","ref","element","joinWithBr","React","Component","JSHINT","音韻地位example","from描述","音韻地位properties","Object","getOwnPropertyNames","concat","getPrototypeOf","slice","deriverParameters","SchemaEditor","settings","getNewSettings","input","setSchemaState","loadSchema","cm","options","autocomplete","list","cursor","getCursor","token","getTokenAt","from","Pos","line","start","to","end","filter","prop","startsWith","string","keys","預設選項","項目數","test","event","preventDefault","addr","name","fetchFile","original","Swal","fire","showClass","popup","hideClass","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","推導選項","newProp","target","value","deleteSchema","oldSettings","oldOptions","推導方案","Function","bind","Qieyun","方案選項","combine","changeParameter","key","set","parameters","列表","item","Array","isArray","String","onChange","JSON","parse","stringify","option","type","checked","step","parameter","push","resetParameters","disabled","single","onSubmit","schemas","label","changeSchema","id","mode","lineNumbers","scrollbarStyle","extraKeys","F11","setOption","getOption","Esc","F9","getScrollInfo","lineAtHeight","offset","heightAtLine","prettier","formatWithCursor","getValue","cursorOffset","indexFromPos","parser","plugins","parserBabel","formatted","setValue","position","posFromIndex","scrollTo","setCursor","maxHighlightLength","Infinity","viewportMargin","placeholder","styleActiveLine","autoCloseBrackets","matchBrackets","foldGutter","lint","esversion","gutters","hintOptions","hint","completeSingle","onBeforeChange","data","onCursorActivity","hasFocus","showHint","onFocus","setTimeout","query字頭","資料","iter音韻地位","query音韻地位","SwalReact","withReactContent","notifyError","msg","err","technicalMessage","undefined","Error","message","cause","stack","replace","config","customClass","html","copyFailed","copySuccess","copyFallback","txt","textArea","focus","select","execCommand","removeChild","presetArticle","tupa_marks","ttomni","tupa","baxter","blankego","kyonh","zyepheng","karlgren","panwuyun","unt","msoeg_v8","mid_tang","chiangxhua","mongol","zhongyuan","fanwan","putonghua","gwongzau","zaonhe","langjin","taibu","ayaka_v8","convertArticle","convertPresetArticle","exportAllSmallRhymes","exportAllSyllables","exportAllSyllablesWithCount","callback","fetch","response","catch","schemaCopy","Date","array","hidden","Main","largeTooltip","outputArea","schemaNames","localStorage","getItem","schemaInputs","schemaParameterLists","article","convertVariant","output","isApplied","userInputs","optionsAll","callDeriver","handles","chs","iLast","所有異體字","Yitizi","get","推導結果","entry","find","every","指定地位","適配分析體系","v2extStrict","class音韻地位","findIndex","等於","split","passage","j","擬音","代表字s","地位","by反切","Map","has","values","get代表字","Set","reduce","counter","sort","a","b","k","v","handlePredefinedOptions","textContent","trimEnd","navigator","clipboard","writeText","scrollIntoView","behavior","block","changeValue","setItem","storeSchemas","schema","addSchema","splice","rows","autoComplete","autoCorrect","autoCapitalize","spellCheck","required","handleCopy","scrollToOutput","showAbout","container","htmlContainer","showCloseButton","showConfirmButton","href","App","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e33a452c.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./large-tooltip.css\";\n\n// https://stackoverflow.com/a/1038781\nfunction getPageWidth() {\n  return Math.max(\n    document.body.scrollWidth,\n    document.documentElement.scrollWidth,\n    document.body.offsetWidth,\n    document.documentElement.offsetWidth,\n    document.documentElement.clientWidth\n  );\n}\n\nfunction init() {\n  const divOuter = document.createElement(\"div\");\n  divOuter.classList.add(\"large-tooltip-outer\");\n  const divInner = document.createElement(\"div\");\n  divInner.classList.add(\"large-tooltip-inner\");\n  divOuter.appendChild(divInner);\n  divInner.classList.add(\"large-tooltip-hidden\");\n  document.body.appendChild(divOuter);\n\n  return {\n    addTooltip: (content: React.ReactElement, relativeToNode: Element) => {\n      function showTooltip() {\n        const relativeToNodeBox = relativeToNode.getBoundingClientRect();\n        const relativeToNodeTop = relativeToNodeBox.top + window.pageYOffset;\n        const relativeToNodeLeft = relativeToNodeBox.left + window.pageXOffset;\n\n        ReactDOM.render(content, divInner);\n\n        const divInnerBox = divInner.getBoundingClientRect();\n        const divInnerHeight = divInnerBox.height;\n        const divInnerWidth = divInnerBox.width;\n\n        const targetTop = relativeToNodeTop - divInnerHeight;\n\n        let targetLeft = relativeToNodeLeft - divInnerWidth / 2; // align center by default\n        const oneEmSize = parseFloat(getComputedStyle(document.body).fontSize);\n        // the distance to left margin of the page should be 1em or greater\n        const miniumLeft = oneEmSize;\n        // if left overflow, align left\n        targetLeft = targetLeft < miniumLeft ? miniumLeft : targetLeft;\n        // the distance to right margin of the page should be 1em or greater\n        const maximumRight = getPageWidth() - oneEmSize - divInnerWidth;\n        // if right overflow, align right\n        targetLeft = targetLeft > maximumRight ? maximumRight : targetLeft;\n\n        divInner.style.top = targetTop + \"px\";\n        divInner.style.left = targetLeft + \"px\";\n\n        divInner.classList.remove(\"large-tooltip-hidden\");\n      }\n      function hideTooltip() {\n        divInner.classList.add(\"large-tooltip-hidden\");\n      }\n      relativeToNode.addEventListener(\"mouseenter\", showTooltip, false);\n      relativeToNode.addEventListener(\"touchstart\", showTooltip, false);\n      relativeToNode.addEventListener(\"mouseleave\", hideTooltip, false);\n      relativeToNode.addEventListener(\"touchend\", hideTooltip, false);\n    },\n  };\n}\n\nconst LargeTooltip = { init };\n\nexport default LargeTooltip;\n","import React from \"react\";\nimport { Entries, joinWithBr } from \"./Main\";\n\ninterface EntryProps {\n  ch: string;\n  entries: Entries;\n  tooltip: any;\n  preselect?: number;\n}\n\ninterface EntryState {\n  rubyClass: string;\n  selected: number;\n}\n\nclass Entry extends React.Component<EntryProps, EntryState> {\n  constructor(props: any) {\n    super(props);\n    const { entries, preselect } = this.props;\n    const selected = preselect ?? 0;\n    if (entries.length) {\n      this.state = {\n        rubyClass: entries[selected][1].some(({ 解釋 }) => !解釋)\n          ? \"entry-special\"\n          : entries.length === 1\n          ? \"\"\n          : preselect == null\n          ? \"entry-unresolved\"\n          : \"entry-multiple\",\n        selected,\n      };\n    }\n  }\n\n  handleClick(index: number) {\n    if (this.props.entries.length >= 2) {\n      this.setState((state: EntryState) => ({\n        selected: index,\n        rubyClass: this.props.entries[index][1].some(({ 解釋 }) => !解釋) ? \"entry-special\" : \"entry-multiple\",\n      }));\n    }\n  }\n\n  render() {\n    if (!this.props.entries.length) return <>{this.props.ch}</>;\n\n    const tooltip = (\n      <div className=\"tooltip-items-wrapper\">\n        {this.props.entries.map(([pronunciation, ress], i) => (\n          <p\n            key={i}\n            className={\"tooltip-item\" + (this.props.entries.length > 1 && i === this.state.selected ? \" selected\" : \"\")}\n            onClick={() => this.handleClick(i)}>\n            <span className=\"nowrap\" lang=\"och-Latn-fonipa\">\n              {pronunciation.join(\" / \")}\n            </span>{\" \"}\n            {ress.map((res, index) => {\n              const { 字頭, 解釋, 音韻地位 } = res;\n              let { 反切 } = res;\n              反切 = 反切 == null ? \"\" : `${反切}切 `;\n              return (\n                <React.Fragment key={index}>\n                  {index !== 0 && <br />}\n                  <span className=\"tooltip-ch\">{字頭}</span> {音韻地位.描述} {反切 + 解釋}\n                </React.Fragment>\n              );\n            })}\n          </p>\n        ))}\n      </div>\n    );\n\n    return (\n      <span className=\"ruby-wrapper\" ref={element => element && this.props.tooltip.addTooltip(tooltip, element)}>\n        <ruby className={this.state.rubyClass}>\n          {this.props.ch}\n          <rp>(</rp>\n          <rt lang=\"och-Latn-fonipa\">{joinWithBr(this.props.entries[this.state.selected][0])}</rt>\n          <rp>)</rp>\n        </ruby>\n      </span>\n    );\n  }\n}\n\nexport default Entry;\n","import React, { Fragment } from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport { JSHINT } from \"jshint\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/addon/display/placeholder\";\nimport \"codemirror/addon/display/fullscreen\";\nimport \"codemirror/addon/display/fullscreen.css\";\nimport \"codemirror/addon/edit/matchbrackets\";\nimport \"codemirror/addon/edit/closebrackets\";\nimport \"codemirror/addon/fold/foldgutter\";\nimport \"codemirror/addon/fold/foldgutter.css\";\nimport \"codemirror/addon/fold/brace-fold\";\nimport \"codemirror/addon/fold/comment-fold\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/addon/hint/show-hint.css\";\nimport \"codemirror/addon/lint/lint\";\nimport \"codemirror/addon/lint/javascript-lint\";\nimport \"codemirror/addon/lint/lint.css\";\nimport \"codemirror/addon/scroll/simplescrollbars\";\nimport \"codemirror/addon/scroll/simplescrollbars.css\";\nimport \"codemirror/addon/selection/active-line\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport { Pos, ShowHintOptions } from \"codemirror\";\nimport Swal from \"sweetalert2\";\nimport { fetchFile, schemas, SchemaState } from \"./Main\";\nimport prettier from \"prettier/standalone\";\nimport parserBabel from \"prettier/parser-babel\";\n\nimport * as Qieyun from \"qieyun\";\nimport { 音韻地位 } from \"qieyun\";\nimport { 推導方案, 推導選項 } from \"tshet-uinh-deriver-tools\";\nimport type { 原始推導函數 } from \"tshet-uinh-deriver-tools\";\n\n(window as any).JSHINT = JSHINT;\n\ninterface SchemaProps extends SchemaState {\n  setSchemaState: (state: SchemaState) => void;\n  deleteSchema: (state: SchemaState) => void;\n  single: boolean;\n  autocomplete: boolean;\n}\n\nconst 音韻地位example = 音韻地位.from描述(\"幫三凡入\");\nconst 音韻地位properties = Object.getOwnPropertyNames(音韻地位example).concat(\n  Object.getOwnPropertyNames(Object.getPrototypeOf(音韻地位example)).slice(1)\n);\nconst deriverParameters = [\"音韻地位\", \"字頭\"];\n\nclass SchemaEditor extends React.Component<SchemaProps, any> {\n  constructor(props: SchemaProps) {\n    super(props);\n    const settings = this.getNewSettings(props.input);\n    if (settings) props.setSchemaState({ ...props, settings });\n  }\n\n  componentDidMount() {\n    this.loadSchema();\n  }\n\n  autocomplete(cm: CodeMirror.Editor, options: ShowHintOptions) {\n    if (!this?.props.autocomplete) return;\n\n    const cursor = cm.getCursor();\n    const token = cm.getTokenAt(cursor);\n    let list: string[];\n    let from = Pos(cursor.line, token.start);\n    let to = Pos(cursor.line, token.end);\n    const filter = () => (list = list.filter(prop => prop.startsWith(token.string) && prop !== token.string));\n\n    switch (cm.getTokenAt(Pos(cursor.line, token.start - 1)).string) {\n      case \"音韻地位\":\n        list = 音韻地位properties;\n        break;\n      case \"選項\":\n        list = Object.keys(this.props.settings.預設選項);\n        break;\n      default:\n        list = deriverParameters.concat(this.props.settings.項目數 ? [\"選項\"] : []);\n        if (cursor.ch === token.end && /[\\s!-#%-/:-@[-^`{-~]$/.test(token.string)) from = to;\n        else filter();\n        return { list, from, to };\n    }\n    if (token.string === \".\") from = to;\n    else if (cm.getTokenAt(from).string === \".\") filter();\n    else return;\n    return { list, from, to };\n  }\n\n  loadSchema(event?: any) {\n    if (event) event.preventDefault();\n    // TODO restore after new qieyun-examples deployment\n    //fetchFile(`https://nk2028-1305783649.file.myqcloud.com/qieyun-examples/${this.props.name}.js`, input => {\n    let addr =\n      this.props.name === \"ttomni\"\n        ? \"https://raw.githubusercontent.com/pustot/world-building/main/OQeVD8nA.js\"\n        : `https://cdn.jsdelivr.net/gh/nk2028/qieyun-examples@main/${this.props.name}.js`;\n    if (this.props.name === \"tupa_marks\")\n      addr = \"https://raw.githubusercontent.com/pustot/world-building/main/tupa-marks.js\";\n    fetchFile(addr, input => {\n      if (event && this.props.input && this.props.input !== this.props.original) {\n        Swal.fire({\n          showClass: { popup: \"\" },\n          hideClass: { popup: \"\" },\n          title: \"是否確定載入？\",\n          text: \"您會遺失所有變更。\",\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonText: \"確定\",\n          cancelButtonText: \"取消\",\n        }).then(result => {\n          if (result.isConfirmed) {\n            this.props.setSchemaState({\n              ...this.props,\n              input,\n              original: input,\n              settings: this.getNewSettings(input, new 推導選項()) ?? new 推導選項(),\n            });\n          }\n        });\n      } else {\n        const newProp = { ...this.props, original: input };\n        if (event || !this.props.input) {\n          newProp.input = input;\n          newProp.settings = this.getNewSettings(input, new 推導選項()) ?? new 推導選項();\n        }\n        this.props.setSchemaState(newProp);\n      }\n    });\n  }\n\n  changeSchema(event: any) {\n    this.props.setSchemaState({ ...this.props, name: event.target.value });\n  }\n\n  deleteSchema() {\n    if (this.props.input && this.props.input !== this.props.original) {\n      Swal.fire({\n        showClass: { popup: \"\" },\n        hideClass: { popup: \"\" },\n        title: \"是否確定刪除？\",\n        text: \"您會遺失所有變更。\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"確定\",\n        cancelButtonText: \"取消\",\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.props.deleteSchema(this.props);\n        }\n      });\n    } else {\n      this.props.deleteSchema(this.props);\n    }\n  }\n\n  getNewSettings(input: string, oldSettings: 推導選項 = this.props.settings): 推導選項 | null {\n    const oldOptions = oldSettings.預設選項;\n    let settings: 推導選項;\n    try {\n      settings = new 推導方案(\n        // eslint-disable-next-line no-new-func\n        new Function(\"Qieyun\", \"選項\", \"音韻地位\", \"字頭\", input).bind(null, Qieyun) as 原始推導函數<string>\n      ).方案選項(oldOptions);\n    } catch {\n      return null;\n    }\n    return settings.combine(oldSettings);\n  }\n\n  resetParameters() {\n    this.props.setSchemaState({\n      ...this.props,\n      settings: this.getNewSettings(this.props.input, new 推導選項()) ?? new 推導選項(),\n    });\n  }\n\n  render() {\n    const changeParameter = (key: string, value: any) => {\n      this.props.setSchemaState({\n        ...this.props,\n        settings: this.getNewSettings(this.props.input, this.props.settings.set(key, value)) ?? new 推導選項(),\n      });\n    };\n\n    const formatCode = (cm: CodeMirror.Editor) => {\n      const cursor = cm.getCursor();\n      const { left, top } = cm.getScrollInfo();\n      const line = cm.lineAtHeight(top, \"local\");\n      const offset = top - cm.heightAtLine(line, \"local\");\n      const { formatted, cursorOffset } = prettier.formatWithCursor(cm.getValue(), {\n        cursorOffset: cm.indexFromPos(cursor),\n        parser: \"babel\",\n        plugins: [parserBabel],\n      });\n      cm.setValue(formatted);\n      const position = cm.posFromIndex(cursorOffset);\n      cm.scrollTo(left, cm.heightAtLine(position.line - cursor.line + line, \"local\") + offset);\n      cm.setCursor(position);\n    };\n\n    let parameters = this.props.settings.列表\n      .map((item, index) => {\n        if (!Array.isArray(item) || item.length < 2) {\n          return !!item ? (\n            <Fragment key={index}>\n              <br />\n              <b>〔{String(item)}〕</b>\n            </Fragment>\n          ) : (\n            <br key={index} />\n          );\n        }\n        const [key, value] = item;\n        if (Array.isArray(value))\n          return (\n            <label key={index}>\n              <span className=\"select-label\">{key}</span>\n              <select\n                onChange={event => changeParameter(key, JSON.parse(event.target.value))}\n                value={JSON.stringify(value[0])}>\n                {value.slice(1).map((option, i) => (\n                  <option key={i + 1} value={JSON.stringify(option)}>\n                    {option + \"\"}\n                  </option>\n                ))}\n              </select>\n            </label>\n          );\n        else\n          switch (typeof value) {\n            case \"boolean\":\n              return (\n                <label key={index}>\n                  <input\n                    type=\"checkbox\"\n                    checked={value}\n                    onChange={event => changeParameter(key, event.target.checked)}\n                  />\n                  {key}\n                </label>\n              );\n            case \"number\":\n              return (\n                <label key={index}>\n                  {key}\n                  <input\n                    type=\"number\"\n                    value={value}\n                    step=\"any\"\n                    onChange={event => changeParameter(key, +event.target.value)}\n                  />\n                </label>\n              );\n            case \"string\":\n              return (\n                <label key={index}>\n                  {key}\n                  <input type=\"text\" value={value} onChange={event => changeParameter(key, event.target.value)} />\n                </label>\n              );\n            default:\n              return null;\n          }\n      })\n      .filter(parameter => parameter);\n    parameters.push(\n      parameters.length ? (\n        <input\n          className=\"pure-button\"\n          type=\"button\"\n          value=\"恢復預設值\"\n          onClick={() => this.resetParameters()}\n          key=\"reset\"\n        />\n      ) : (\n        <span key=\"hint\" className=\"hint\">\n          此推導方案無可用選項，請於推導程式中回傳 Object.entries() 形式的陣列以使用「選項」功能。\n        </span>\n      )\n    );\n\n    return (\n      <div className=\"schema-editor\">\n        <form className=\"delete-schema\">\n          <input type=\"button\" title=\"刪除方案\" disabled={this.props.single} onClick={() => this.deleteSchema()} />\n        </form>\n        <form className=\"pure-form\" onSubmit={event => this.loadSchema(event)}>\n          <p>\n            <b>預設推導方案：</b>\n            {Object.entries(schemas).map(([value, label], index) => (\n              <label key={index}>\n                <input\n                  type=\"radio\"\n                  name=\"schema\"\n                  value={value}\n                  checked={this.props.name === value}\n                  onChange={event => this.changeSchema(event)}\n                />\n                {label}\n              </label>\n            ))}\n            <input className=\"pure-button\" type=\"submit\" value=\"載入\" />\n          </p>\n        </form>\n        <div lang=\"en-x-code\" id=\"schemaInput\">\n          <CodeMirror\n            value={this.props.input}\n            options={{\n              mode: \"javascript\",\n              lineNumbers: true,\n              scrollbarStyle: \"overlay\",\n              extraKeys: {\n                F11: cm => cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\")),\n                Esc: cm => cm.setOption(\"fullScreen\", false),\n                F9: formatCode,\n              },\n              maxHighlightLength: Infinity,\n              viewportMargin: 16,\n              placeholder: \"以 JavaScript 輸入推導方案……\",\n              styleActiveLine: true,\n              autoCloseBrackets: true,\n              matchBrackets: true,\n              foldGutter: true,\n              lint: { esversion: Infinity } as any,\n              gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\", \"CodeMirror-lint-markers\"],\n              hintOptions: { hint: this.autocomplete.bind(this), completeSingle: false },\n            }}\n            onBeforeChange={(cm, data, input) => {\n              const newProp = { ...this.props, input };\n              const settings = this.getNewSettings(input);\n              if (settings) newProp.settings = settings;\n              this.props.setSchemaState(newProp);\n            }}\n            onCursorActivity={cm => cm.hasFocus() && cm.showHint()}\n            onFocus={cm => setTimeout(() => cm.showHint(), 100)}\n          />\n        </div>\n        <form className=\"pure-form\">\n          <p className=\"schema-settings\">\n            <b>選項：</b>\n            {parameters}\n          </p>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default SchemaEditor;\n","import * as Qieyun from \"qieyun\";\nimport { 音韻地位 as class音韻地位, 適配分析體系, 資料 } from \"qieyun\";\nimport { 推導方案, 推導選項 } from \"tshet-uinh-deriver-tools\";\nimport type { 推導函數, 原始推導函數, 選項項目 } from \"tshet-uinh-deriver-tools\";\n\nimport React from \"react\";\nimport Yitizi from \"yitizi\";\nimport LargeTooltip from \"./large-tooltip\";\nimport Entry from \"./Entry\";\nimport SchemaEditor from \"./SchemaEditor\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\nconst { query字頭, iter音韻地位, query音韻地位 } = 資料;\n\nfunction get代表字(地位: class音韻地位): string[] {\n  const by反切 = new Map();\n  for (const { 字頭, 反切 } of query音韻地位(地位)) {\n    if (!by反切.has(反切)) {\n      by反切.set(反切, 字頭);\n    }\n  }\n  return Array.from(by反切.values());\n}\n\nconst SwalReact = withReactContent(Swal);\n\nfunction notifyError(msg: string, err?: any) {\n  let technicalMessage: string | null = null;\n  if (err !== undefined) {\n    if (!(err instanceof Error)) {\n      throw err;\n    }\n    technicalMessage = err.message;\n    while (err.cause instanceof Error) {\n      err = err.cause;\n      technicalMessage += \"\\n\" + err.message;\n    }\n    if (err?.stack) {\n      technicalMessage += \"\\n\" + err.stack.replace(/\\n +at eval[^]+/, \"\");\n    }\n  }\n  const config: Parameters<typeof SwalReact.fire>[0] = {\n    showClass: { popup: \"\" },\n    hideClass: { popup: \"\" },\n    icon: \"error\",\n    title: \"錯誤\",\n    customClass: \"error-with-stack\",\n    html: (\n      <>\n        <p>{msg}</p>\n        <pre lang=\"en-x-code\">{technicalMessage}</pre>\n      </>\n    ),\n    confirmButtonText: \"確定\",\n  };\n  if (technicalMessage !== null) {\n    config.html = (\n      <>\n        <p>{msg}</p>\n        <pre lang=\"en-x-code\">{technicalMessage}</pre>\n      </>\n    );\n    config.customClass = \"error-with-stack\";\n  } else {\n    config.text = msg;\n  }\n  SwalReact.fire(config);\n}\n\nfunction copyFailed() {\n  notifyError(\"瀏覽器不支援匯出至剪貼簿，操作失敗\");\n}\n\nfunction copySuccess() {\n  Swal.fire({\n    showClass: { popup: \"\" },\n    hideClass: { popup: \"\" },\n    icon: \"success\",\n    title: \"成功\",\n    text: \"已成功匯出至剪貼簿\",\n    confirmButtonText: \"確定\",\n  });\n}\n\nfunction copyFallback(txt: string) {\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = txt;\n  textArea.style.position = \"fixed\";\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n  try {\n    document.execCommand(\"copy\") ? copySuccess() : copyFailed();\n  } catch (err) {\n    copyFailed();\n  }\n  document.body.removeChild(textArea);\n}\n\nexport const schemas = {\n  tupa_marks: \"切韻拼音（浦式附标）\",\n  ttomni: \"OQeVD8nA\",\n  tupa: \"切韻拼音\",\n  baxter: \"白一平轉寫\",\n  blankego: \"有女羅馬字\",\n  kyonh: \"古韻羅馬字\",\n  zyepheng: \"隋拼\",\n  karlgren: \"高本漢擬音\",\n  panwuyun: \"潘悟雲擬音\",\n  unt: \"unt 切韻擬音\",\n  msoeg_v8: \"msoeg 中古擬音 V8\",\n  mid_tang: \"推導盛中唐擬音\",\n  chiangxhua: \"推導《聲音唱和圖》擬音\",\n  mongol: \"推導《蒙古字韻》\",\n  zhongyuan: \"推導《中原音韻》擬音\",\n  fanwan: \"推導《分韻撮要》擬音\",\n  putonghua: \"推導普通話\",\n  gwongzau: \"推導廣州音\",\n  zaonhe: \"推導上海話\",\n  langjin: \"推導南京話\",\n  taibu: \"推導大埔話\",\n  ayaka_v8: \"綾香思考音系\",\n};\n\nconst options = {\n  convertArticle: \"從輸入框中讀取文章，並注音\",\n  convertPresetArticle: \"為預設文章注音\",\n  exportAllSmallRhymes: \"導出所有小韻\",\n  exportAllSyllables: \"導出所有音節\",\n  exportAllSyllablesWithCount: \"導出所有音節，並計數\",\n};\n\ntype Schema = keyof typeof schemas;\ntype Option = keyof typeof options;\n\ninterface MainState {\n  schemas: SchemaState[];\n  article: string;\n  option: Option;\n  convertVariant: boolean;\n  autocomplete: boolean;\n  output: JSX.Element[];\n  isApplied: boolean;\n}\n\nexport interface SchemaState {\n  name: Schema;\n  input: string;\n  original: string;\n  settings: 推導選項;\n  id: number;\n}\n\nexport type Entries = [string[], { 字頭: string; 反切: string | null; 解釋: string; 音韻地位: class音韻地位 }[]][];\n\nexport function fetchFile(input: string, callback: (text: string) => void) {\n  fetch(input)\n    .then(response => response.text())\n    .then(callback)\n    .catch(err => notifyError(\"載入檔案失敗\", err));\n}\n\nfunction schemaCopy(): SchemaState {\n  return { name: \"ttomni\", input: \"\", original: \"\", settings: new 推導選項(), id: +new Date() };\n}\n\nexport function joinWithBr(array: (string | JSX.Element)[]) {\n  return array.map((item, index) => (\n    <React.Fragment key={index}>\n      {index !== 0 && (\n        <>\n          <span hidden> / </span>\n          <br />\n        </>\n      )}\n      {item}\n    </React.Fragment>\n  ));\n}\n\nlet presetArticle: string;\n\nconst defaultArticle =\n  \"遙襟甫暢，逸興(曉開三蒸去)遄飛。爽籟發而清風(幫三東平)生(生開三庚平)，纖歌凝(疑開三蒸平)而白雲遏。\" +\n  \"睢(心合三脂平)園綠竹，氣(溪開三微去)凌彭澤之樽；鄴水朱華(匣合二麻平)，光(見合一唐平)照臨(來開三侵平)川之筆。\" +\n  \"四美具，二難(泥開一寒平)并(幫三清平)。窮睇(定開四齊去)眄(明四先去)於(影開三魚平)中(知三東平)天，極娛(疑三虞平)遊於(影開三魚平)暇日。\" +\n  \"天高地迥，覺(見二江入)宇宙之無窮；興(曉開三蒸去)盡(從開三眞上)悲來，識(書開三蒸入)盈虛(曉開三魚平)之有數(生三虞去)。\" +\n  \"望(明三陽平)長(澄開三陽平)安於(影開三魚平)日下(匣開二麻上)，目吳會(見合一泰去)於(影開三魚平)雲間(見開二山平)。\" +\n  \"地勢極而南溟(明四青平)深(書開三侵平)，天柱(澄三虞上)高而北辰遠(云合三元上)。關山難(泥開一寒平)越(云合三元入)，誰悲失路之人。\" +\n  \"萍水相(心開三陽平)逢，盡(從開三眞上)是他鄉之客。懷帝閽而不(幫三尤上)見(見開四先去)，奉宣室以何(匣開一歌平)年？\";\n\nclass Main extends React.Component<any, MainState> {\n  largeTooltip?: any;\n\n  outputArea?: HTMLElement;\n\n  constructor(props: any) {\n    super(props);\n\n    const schemaNames: Schema[] = JSON.parse(localStorage.getItem(\"autoderiver/0.1/schemas\") || \"[]\");\n    const schemaInputs: string[] = JSON.parse(localStorage.getItem(\"autoderiver/0.1/inputs\") || \"[]\");\n    const schemaParameterLists: 選項項目[][] = JSON.parse(localStorage.getItem(\"autoderiver/0.1/settings\") || \"[]\");\n\n    this.state = {\n      schemas: schemaNames.length\n        ? schemaNames.map((name, id) => ({\n          name,\n          input: schemaInputs[id],\n          original: \"\",\n          settings: new 推導選項(schemaParameterLists[id]),\n          id,\n        }))\n        : [schemaCopy()],\n      article: localStorage.getItem(\"autoderiver/0.1/article\") || defaultArticle,\n      option: (localStorage.getItem(\"autoderiver/0.1/option\") as Option) || \"convertArticle\",\n      convertVariant: localStorage.getItem(\"autoderiver/0.1/convertVariant\") === \"true\",\n      autocomplete: localStorage.getItem(\"autoderiver/0.1/autocomplete\") !== \"false\",\n      output: [],\n      isApplied: false,\n    };\n  }\n\n  componentDidMount() {\n    this.largeTooltip = LargeTooltip.init();\n  }\n\n  handlePredefinedOptions() {\n    const id = +new Date() + \":\";\n\n    let userInputs: 推導函數<string>[];\n    const optionsAll = this.state.schemas.map(({ settings }) => settings.預設選項);\n\n    let callDeriver = (音韻地位: class音韻地位, 字頭: string | null) => {\n      try {\n        return userInputs.map(input => input(音韻地位, 字頭));\n      } catch (err) {\n        notifyError(\n          字頭\n            ? `推導「${字頭}」字（音韻地位：${音韻地位.描述}）時發生錯誤`\n            : `推導「${音韻地位.描述}」音韻地位（字為 null）時發生錯誤`,\n          err\n        );\n        throw err;\n      }\n    };\n\n    if (this.state.option === \"convertPresetArticle\" && !presetArticle) {\n      fetchFile(\"https://cdn.jsdelivr.net/gh/nk2028/qieyun-text-label@main/index.txt\", article => {\n        presetArticle = article;\n        this.handlePredefinedOptions();\n      });\n      return;\n    }\n\n    let handles = {\n      convertArticle: () => {\n        const chs = Array.from(this.state.article);\n        const res: JSX.Element[] = [];\n\n        for (let i = 0; i < chs.length; i++) {\n          const ch = chs[i];\n          let iLast = i;\n\n          const 所有異體字 = [ch, null].concat(Yitizi.get(ch));\n          const entries: Entries = [];\n\n          for (const 字頭 of 所有異體字) {\n            if (字頭 === null) {\n              if (this.state.convertVariant || entries.length === 0) {\n                continue;\n              } else {\n                break;\n              }\n            }\n            for (const { 音韻地位, 反切, 解釋 } of query字頭(字頭)) {\n              const 推導結果 = callDeriver(音韻地位, 字頭);\n              const entry = entries.find(key => key[0].every((pronunciation, i) => pronunciation === 推導結果[i]));\n              if (entry) entry[1].push({ 字頭, 反切, 解釋, 音韻地位 });\n              else entries.push([推導結果, [{ 字頭, 反切, 解釋, 音韻地位 }]]);\n            }\n          }\n\n          let preselect: number | undefined = undefined;\n          if (chs[i + 1] === \"(\") {\n            iLast = i + 2;\n            while (iLast <= i + 8 && iLast < chs.length && chs[iLast] !== \")\") iLast++;\n            if (iLast <= i + 8 && chs[iLast] === \")\") {\n              const 指定地位 = (() => {\n                try {\n                  return 適配分析體系.v2extStrict(class音韻地位.from描述(chs.slice(i + 2, iLast).join(\"\")));\n                } catch {\n                  iLast = i;\n                  return undefined;\n                }\n              })();\n              if (指定地位) {\n                const index = entries.findIndex(([, 條目s]) => 條目s.some(({ 音韻地位 }) => 音韻地位.等於(指定地位)));\n                if (index === -1) {\n                  const 推導結果 = callDeriver(指定地位, ch);\n                  preselect = entries.push([推導結果, [{ 字頭: ch, 反切: null, 解釋: \"\", 音韻地位: 指定地位 }]]) - 1;\n                } else {\n                  preselect = index;\n                }\n              }\n            }\n          }\n\n          res.push(\n            <Entry key={id + i} ch={ch} entries={entries} tooltip={this.largeTooltip} preselect={preselect}></Entry>\n          );\n          i = iLast;\n        }\n        return res;\n      },\n\n      convertPresetArticle: () =>\n        presetArticle.split(\"\\n\\n\").map((passage, i) => (\n          <React.Fragment key={i}>\n            {passage.split(\"\\n\").map((line, key) => {\n              let output: React.ReactElement[] = [];\n              const chs = Array.from(line);\n\n              for (let i = 0; i < chs.length; i++) {\n                if (chs[i + 1] === \"(\") {\n                  const j = i;\n                  while (chs[++i] !== \")\" && i < chs.length);\n\n                  const 字頭 = chs[j];\n                  const 描述 = chs.slice(j + 2, i).join(\"\");\n                  const 音韻地位 = class音韻地位.from描述(描述);\n                  const 擬音 = callDeriver(音韻地位, 字頭);\n\n                  output.push(\n                    <ruby key={id + j}>\n                      {字頭}\n                      <rp>(</rp>\n                      <rt lang=\"och-Latn-fonipa\">{joinWithBr(擬音)}</rt>\n                      <rp>)</rp>\n                    </ruby>\n                  );\n                } else output.push(<React.Fragment key={id + i}>{chs[i]}</React.Fragment>);\n              }\n\n              output.push(\n                <span hidden key={id + chs.length}>\n                  {\"\\n\"}\n                </span>\n              );\n              return React.createElement(key ? \"p\" : \"h3\", { key }, output);\n            })}\n            <span hidden>{\"\\n\"}</span>\n          </React.Fragment>\n        )),\n\n      exportAllSmallRhymes: () =>\n        Array.from(iter音韻地位()).map((音韻地位, i) => {\n          const 代表字s = get代表字(音韻地位);\n          return (\n            <p key={id + i}>\n              {音韻地位.描述} <span lang=\"och-Latn-fonipa\">{callDeriver(音韻地位, 代表字s[0]).join(\" / \")}</span>{\" \"}\n              {代表字s.join(\"\")}\n              <span hidden>{\"\\n\"}</span>\n            </p>\n          );\n        }),\n\n      exportAllSyllables: () => [\n        <span lang=\"och-Latn-fonipa\" key={id + 0}>\n          {Array.from(\n            new Set(Array.from(iter音韻地位()).map(音韻地位 => callDeriver(音韻地位, null).join(\" / \")))\n          ).join(\", \")}\n        </span>,\n      ],\n\n      exportAllSyllablesWithCount: () => [\n        <span lang=\"och-Latn-fonipa\" key={id + 0}>\n          {Array.from(\n            Array.from(iter音韻地位()).reduce((counter, 音韻地位) => {\n              const 擬音 = callDeriver(音韻地位, null).join(\" / \");\n              counter.set(擬音, -~counter.get(擬音));\n              return counter;\n            }, new Map())\n          )\n            .sort((a, b) => b[1] - a[1])\n            .map(([k, v]) => `${k} (${v})`)\n            .join(\", \")}\n        </span>,\n      ],\n    };\n\n    try {\n      userInputs = this.state.schemas.map(({ input }, i) =>\n        new 推導方案(\n          // eslint-disable-next-line no-new-func\n          new Function(\"Qieyun\", \"選項\", \"音韻地位\", \"字頭\", input).bind(null, Qieyun) as 原始推導函數<string>\n        )(optionsAll[i])\n      );\n    } catch (err) {\n      notifyError(\"程式碼錯誤\", err);\n      return;\n    }\n    try {\n      this.setState({ output: handles[this.state.option](), isApplied: true });\n    } catch (err) { }\n  }\n\n  handleCopy() {\n    const txt = this.outputArea?.textContent?.trimEnd();\n    if (txt) {\n      if (navigator.clipboard) navigator.clipboard.writeText(txt).then(copySuccess, () => copyFallback(txt));\n      else copyFallback(txt);\n    } else notifyError(\"請先進行操作，再匯出結果\");\n  }\n\n  scrollToOutput(element: HTMLElement) {\n    this.outputArea = element;\n    if (this.state.isApplied) {\n      element.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n      this.setState({ isApplied: false });\n    }\n  }\n\n  render() {\n    const changeValue = (key: keyof MainState, value: any) => {\n      this.setState({ [key]: value } as MainState, () => {\n        localStorage.setItem(\"autoderiver/0.1/\" + key, this.state[key] + \"\");\n      });\n    };\n\n    const storeSchemas = () => {\n      localStorage.setItem(\"autoderiver/0.1/schemas\", JSON.stringify(this.state.schemas.map(schema => schema.name)));\n      localStorage.setItem(\"autoderiver/0.1/inputs\", JSON.stringify(this.state.schemas.map(schema => schema.input)));\n      localStorage.setItem(\n        \"autoderiver/0.1/settings\",\n        JSON.stringify(this.state.schemas.map(schemas => schemas.settings))\n      );\n    };\n\n    const addSchema = (id: number | null) => {\n      this.setState(({ schemas }) => {\n        schemas = [...schemas];\n        schemas.splice(schemas.findIndex(schema => schema.id === id) + 1, 0, schemaCopy());\n        return { schemas };\n      }, storeSchemas);\n    };\n\n    const setSchemaState = (state: SchemaState) => {\n      this.setState(({ schemas }) => {\n        schemas = [...schemas];\n        schemas[schemas.findIndex(schema => schema.id === state.id)] = state;\n        return { schemas };\n      }, storeSchemas);\n    };\n\n    const deleteSchema = (state: SchemaState) => {\n      this.setState(({ schemas }) => ({ schemas: schemas.filter(schema => schema.id !== state.id) }), storeSchemas);\n    };\n\n    return (\n      <div className=\"main-container\">\n        <form className=\"add-schema\">\n          <input type=\"button\" title=\"新增方案\" onClick={() => addSchema(null)} />\n        </form>\n        {this.state.schemas.map((schema, index, array) => (\n          <React.Fragment key={schema.id}>\n            <SchemaEditor\n              name={schema.name}\n              input={schema.input}\n              original={schema.original}\n              id={schema.id}\n              settings={schema.settings}\n              setSchemaState={setSchemaState}\n              deleteSchema={deleteSchema}\n              single={array.length === 1}\n              autocomplete={this.state.autocomplete}\n            />\n            <form className=\"add-schema\">\n              <input type=\"button\" title=\"新增方案\" onClick={() => addSchema(schema.id)} />\n            </form>\n          </React.Fragment>\n        ))}\n\n        <form className=\"pure-form\">\n          <p>\n            <textarea\n              id=\"articleInput\"\n              placeholder=\"輸入框\"\n              rows={5}\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              autoCapitalize=\"off\"\n              spellCheck=\"false\"\n              required\n              onChange={event => changeValue(\"article\", event.target.value)}\n              value={this.state.article}\n            />\n          </p>\n          <p>\n            <label>\n              <select onChange={event => changeValue(\"option\", event.target.value)} value={this.state.option}>\n                {Object.entries(options).map(([value, label], index) => (\n                  <option key={index} value={value}>\n                    {label}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <label className={this.state.option === \"convertArticle\" ? \"\" : \"hidden\"}>\n              <input\n                type=\"checkbox\"\n                checked={this.state.convertVariant}\n                onChange={event => changeValue(\"convertVariant\", event.target.checked)}\n              />\n              轉換異體字\n            </label>\n            <input\n              className=\"pure-button pure-button-primary\"\n              type=\"button\"\n              value=\"適用\"\n              onClick={() => this.handlePredefinedOptions()}\n            />\n            <input className=\"pure-button\" type=\"button\" value=\"匯出至剪貼簿\" onClick={() => this.handleCopy()} />\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={this.state.autocomplete}\n                onChange={event => changeValue(\"autocomplete\", event.target.checked)}\n              />\n              編輯推導方案時顯示自動完成\n            </label>\n          </p>\n        </form>\n\n        <output ref={element => element && this.scrollToOutput(element)}>{this.state.output}</output>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n","import \"purecss/build/pure.css\";\nimport \"./App.scss\";\nimport Main from \"./Main\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\nconst SwalReact = withReactContent(Swal);\n\nfunction showAbout() {\n  SwalReact.fire({\n    showClass: { popup: \"\" },\n    hideClass: { popup: \"\" },\n    customClass: {\n      container: \"about-modal\",\n      htmlContainer: \"about-modal-content\",\n    },\n    width: \"60vw\",\n    showCloseButton: true,\n    showConfirmButton: false,\n    html: (\n      <>\n        <h2>關於</h2>\n        <p>\n          切韻音系自動推導器（下稱「本頁面」）由 <a href=\"https://nk2028.shn.hk/\">nk2028</a>{\" \"}\n          開發。我們開發有關語言學的項目，尤其是有關歷史漢語語音學，異體字和日語語言學的項目。\n        </p>\n        <p>\n          歡迎加入 QQ 音韻學答疑羣（羣號 526333751）和 Telegram nk2028 社羣（\n          <a href=\"https://t.me/nk2028_discuss\">@nk2028_discuss</a>）。\n        </p>\n        <p>\n          本頁面原始碼公開於 <a href=\"https://github.com/nk2028/qieyun-autoderiver\">GitHub</a>。\n        </p>\n\n        <h2>私隱權政策</h2>\n        <p>\n          本頁面是一項開放原始碼的網絡服務。作為本頁面的開發者，我們對您的私隱非常重視。本頁面的開發者不會透過本頁面收集您的任何資料。\n        </p>\n        <p>下面將具體介紹本頁面能在何種程度上保障您的私隱權。</p>\n        <b>您鍵入的內容</b>\n        <p>\n          本頁面的開發者不會收集您在本頁面中鍵入的任何內容。任何與您鍵入的內容相關的運算全部在您的系統中完成。本頁面不會將包括待標註的文本、標註結果在內的任何資料傳送至任何伺服器。\n        </p>\n        <b>您的其他資料</b>\n        <p>\n          本頁面使用的內容託管於以下站點：GitHub Pages、jsDelivr、Google\n          Fonts。在您訪問本頁面時，您的瀏覽器將與這些站點交互。本頁面的開發者並不能讀取您訪問這些站點時產生的資料，亦無法控制這些站點如何使用您訪問時產生的資料。\n        </p>\n      </>\n    ),\n  });\n}\n\nfunction App() {\n  return (\n    <div>\n      <header>\n        <nav>\n          <h1>\n            <span onClick={showAbout}>\n              tshet ùn qyim ghèj dzì dᵒúŋ thoj dàw khyì <br />\n              切韻音系自動推導器（浦司图试验fork）\n            </span>\n          </h1>\n        </nav>\n        <a href=\"https://graphemecluster.github.io/qieyun-autoderiver\">試用 v0.2 beta 版</a>\n      </header>\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}